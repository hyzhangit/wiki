## 一般流程

了解现状 =》 明确目标 =》 分析内存&耗时 =》 识别优化点（时间复杂度&空间复杂度） =》 评估预期和代价 =》 实施优化 =》 验证

## 优化思路
### 轻重分离


### 优化案例
性能优化相关：
最重要的方案，其次是算法，还有编码规范。

List接口改为文件接口，流式接口
Cube表拆分，根据业务场景分表分库，分表
预制任务，预汇总
数据库缓存，dw预制区域小区关系表
图例计算由通用比较改为二分法，又改为数组利用下标卡区间法
图例在Dw&数据库计算
最优配置写法优化
配置表增加分区、索引
最优配置缓存，配置缓存
临时表 ，子查询中先过滤
过滤条件优先关联到索引
组合索引最左选择
同步改异步
单线程改并发
顶点包含由自定义算法改为jdk自带
导出由同步改为后台，再改为异步，由一批改为分批，由单文件改为多文件
图例渲染由前台改为后台
栅格渲染增加警戒线
setting页签改为懒加载
网元树下小区个数由实时查询改为在节点返回个数
dw文件缓存
采用redis缓存，guava缓存
Webservice增加注解，加快osgi启动速度
使用
尽量不要使用反射
尽量不要使用复杂正则检验
不要在循环中获取服务等
热点数据缓存(analysissubject,licensecache,freqbandcache)

尽可能多的重用代码，减少不必要代码，提高项目加载速度
js压缩，接口合并，前台调用改为后台调用
距离计算由经纬度计算球面距离修改为大地坐标计算直线距离（100W/s -> 2000W/s）

All室内室外之前用 left join方式，后面改为一次group by在select中sum(csae when)的方式

每次分批都先子查询再在外层取rownum方式，改为先汇总到一张临时表，将rownum生成为新表的索引再去分批导出。

使用临时表代替过滤条件下发
使用set 匹配，而不是for循环嵌套
ibatis mybatis设置fetsize提升查询效率
batch insert 改为for each values
icopyclient文件导入 1w to 10w
NamingSerice ConcurtentTimingStratage
执行计划 oracle postgresql mysql 

首页缓存
tcp直传

生产消费+迭代器-》批处理（Excel解析）
业务下沉

FastUtil -> 基本类型代替包装类


尽可能重用代码，小jar包，提升加载性能
线程池指定大小
集合指定大小

总结：
关键在于思路
jmh
jemeter



基线：（内存占用100w 60字节 3.1GB，CSV读写 5MB/s，oracle插入数据4线程并发最快）


